apiVersion: configuration.konghq.com/v1
kind: KongPlugin
metadata:
  name: key-auth
  namespace: kafka      # Valido solo per Ingress in questo namespace
plugin: key-auth
config:
  # Definisce il nome dell'header HTTP dove Kong cercher√† la chiave
  # Es: curl -H "apikey: mia-chiave-segreta" ...
  key_names:
    - apikey
  # Security Best Practice: Rimuove l'header 'apikey' dalla richiesta prima di inoltrarla
  # al microservizio backend (Producer), evitando che le chiavi finiscano nei log applicativi.
  hide_credentials: true